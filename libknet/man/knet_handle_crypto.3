.\" File automatically generated by doxy2man0.2
.\" Generation date: Sun Nov 12 2017
.TH knet_handle_crypto 3 2017-11-12 "kronosnet" "Kronosnet Programmer's Manual"
.SH "NAME"
knet_handle_crypto \- set up packet cryptographic signing & encryption
.SH SYNOPSIS
.nf
.B #include <libknet.h>
.sp
\fBint knet_handle_crypto\fP(
    \fBknet_handle_t                   \fP\fIknet_h\fP,
    \fBstruct knet_handle_crypto_cfg  *\fP\fIknet_handle_crypto_cfg\fP
);
.fi
.SH DESCRIPTION
.PP 
knet_handle_crypto
.PP 
knet_h - pointer to knet_handle_t
.PP 
knet_handle_crypto_cfg - pointer to a knet_handle_crypto_cfg structure
.PP 
crypto_model should contain the model name. Currently only "openssl" and "nss" are supported. Setting to "none" will disable crypto.
.PP 
crypto_cipher_type should contain the cipher algo name. It can be set to "none" to disable encryption. Currently supported by "nss" model: "3des", "aes128", "aes192" and "aes256". "openssl" model supports more modes and it strictly depends on the openssl build. See: EVP_get_cipherbyname openssl API call for details.
.PP 
crypto_hash_type should contain the hashing algo name. It can be set to "none" to disable hashing. Currently supported by "nss" model: "md5", "sha1", "sha256", "sha384" and "sha512". "openssl" model supports more modes and it strictly depends on the openssl build. See: EVP_get_digestbyname openssl API call for details.
.PP 
private_key will contain the private shared key. It has to be at least KNET_MIN_KEY_LEN long.
.PP 
private_key_len length of the provided private_key.
.PP 
it is safe to call knet_handle_crypto multiple times at runtime. The last config will be used. IMPORTANT: a call to knet_handle_crypto can fail due to: 1) failure to obtain locking 2) errors to initializing the crypto level. This can happen even in subsequent calls to knet_handle_crypto. A failure in crypto init, might leave your traffic unencrypted! It's best to stop data forwarding (see knet_handle_setfwd(3)), change crypto config, start forward again.
.SH STRUCTURES
.SS ""
.PP
.sp
.sp
.RS
.nf
\fB
struct knet_handle_crypto_cfg {
  char          \fIcrypto_model\fP;
  char          \fIcrypto_cipher_type\fP;
  char          \fIcrypto_hash_type\fP;
  unsigned char \fIprivate_key\fP;
  unsigned int  \fIprivate_key_len\fP;
};
\fP
.fi
.RE
.SH RETURN VALUE
.PP
knet_handle_crypto returns: 
.TP
.B 0
on success 

.TP
.B -1
on error and errno is set. 

.TP
.B -2
on crypto subsystem initialization error. No errno is provided at the moment (yet). 

.SH SEE ALSO
.PP
.nh
.ad l
\fIlibknet.h\fP(3), \fIknet_addrtostr\fP(3), \fIknet_get_compress_list\fP(3), \fIknet_get_crypto_list\fP(3), \fIknet_get_transport_id_by_name\fP(3), \fIknet_get_transport_list\fP(3), \fIknet_get_transport_name_by_id\fP(3), \fIknet_handle_add_datafd\fP(3), \fIknet_handle_clear_stats\fP(3), \fIknet_handle_compress\fP(3), \fIknet_handle_crypto\fP(3), \fIknet_handle_enable_filter\fP(3), \fIknet_handle_enable_pmtud_notify\fP(3), \fIknet_handle_enable_sock_notify\fP(3), \fIknet_handle_free\fP(3), \fIknet_handle_get_channel\fP(3), \fIknet_handle_get_datafd\fP(3), \fIknet_handle_get_stats\fP(3), \fIknet_handle_get_transport_reconnect_interval\fP(3), \fIknet_handle_new\fP(3), \fIknet_handle_pmtud_get\fP(3), \fIknet_handle_pmtud_getfreq\fP(3), \fIknet_handle_pmtud_setfreq\fP(3), \fIknet_handle_remove_datafd\fP(3), \fIknet_handle_set_transport_reconnect_interval\fP(3), \fIknet_handle_setfwd\fP(3), \fIknet_host_add\fP(3), \fIknet_host_enable_status_change_notify\fP(3), \fIknet_host_get_host_list\fP(3), \fIknet_host_get_id_by_host_name\fP(3), \fIknet_host_get_name_by_host_id\fP(3), \fIknet_host_get_policy\fP(3), \fIknet_host_get_status\fP(3), \fIknet_host_remove\fP(3), \fIknet_host_set_name\fP(3), \fIknet_host_set_policy\fP(3), \fIknet_link_clear_config\fP(3), \fIknet_link_get_config\fP(3), \fIknet_link_get_enable\fP(3), \fIknet_link_get_link_list\fP(3), \fIknet_link_get_ping_timers\fP(3), \fIknet_link_get_pong_count\fP(3), \fIknet_link_get_priority\fP(3), \fIknet_link_get_status\fP(3), \fIknet_link_set_config\fP(3), \fIknet_link_set_enable\fP(3), \fIknet_link_set_ping_timers\fP(3), \fIknet_link_set_pong_count\fP(3), \fIknet_link_set_priority\fP(3), \fIknet_log_get_loglevel\fP(3), \fIknet_log_get_loglevel_id\fP(3), \fIknet_log_get_loglevel_name\fP(3), \fIknet_log_get_subsystem_id\fP(3), \fIknet_log_get_subsystem_name\fP(3), \fIknet_log_set_loglevel\fP(3), \fIknet_recv\fP(3), \fIknet_send\fP(3), \fIknet_send_sync\fP(3), \fIknet_strtoaddr\fP(3)
.ad
.hy
.SH COPYRIGHT
.PP
Copyright (C) 2010-2017 Red Hat, Inc. All rights reserved.
